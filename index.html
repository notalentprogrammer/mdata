<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Touch Me üòè‚ú®</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #121212;
      color: #f0f0f0;
      font-family: 'Orbitron', sans-serif;
      text-align: center;
      padding: 2em;
      overflow-x: hidden;
    }
    h1 {
      font-size: 5.5em;
      margin-bottom: 1em;
      transition: all 0.5s ease;
      letter-spacing: 0.05em;
    }
    .tease {
      font-size: 1.5em;
      color: #ff80ab;
      margin-left: 0.2em;
      vertical-align: middle;
      animation: wink 1.2s infinite alternate;
    }
    @keyframes wink {
      0% { opacity: 1; }
      80% { opacity: 1; }
      100% { opacity: 0.5; }
    }
    img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      margin-bottom: 2em;
      cursor: pointer;
      transition: opacity 1s ease;
    }
    .dashboard {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2em;
      margin-top: 2em;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.7s, transform 0.7s;
    }
    .dashboard.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .block {
      background: #23232b;
      border-radius: 16px;
      padding: 1.5em 2em;
      min-width: 230px;
      min-height: 180px;
      box-shadow: 0 4px 24px #0006;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      position: relative;
      text-align: left;
    }
    .block-title {
      font-size: 1.4em;
      margin-bottom: 1em;
      font-weight: bold;
      letter-spacing: 0.03em;
      width: 100%;
      text-align: left;
    }
    .item-row {
      display: flex;
      align-items: center;
      margin: 0.5em 0;
      font-size: 1.15em;
      width: 100%;
    }
    .item-label {
      flex: 1;
      text-align: left;
      font-family: inherit;
      font-weight: 500;
      letter-spacing: 0.01em;
    }
    .status {
      margin-left: 1em;
      font-size: 1.2em;
    }
    .done { color: #00e676; }
    .notdone { color: #ff5252; }
    /* Progress bar */
    .progress-bar {
      width: 80px;
      height: 14px;
      background: #32323a;
      border-radius: 8px;
      overflow: hidden;
      margin-left: 1em;
      border: 1.5px solid #444;
      box-sizing: border-box;
      display: flex;
      align-items: center;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #ffd600 60%, #ff80ab 100%);
      border-radius: 8px 0 0 8px;
      transition: width 0.6s cubic-bezier(0.4,0,0.2,1);
    }
    /* 7-day score badge */
    .score-badge {
      position: fixed;
      top: 2em;
      right: 2em;
      background: linear-gradient(135deg, #ff80ab 60%, #ffd600 100%);
      color: #222;
      font-size: 2.2em;
      font-weight: bold;
      border-radius: 1.5em;
      padding: 0.4em 1.1em;
      box-shadow: 0 8px 32px #0008;
      z-index: 100;
      border: 3px solid #fffde7;
      display: flex;
      align-items: center;
      gap: 0.5em;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.7s, transform 0.7s;
    }
    .score-badge.visible {
      opacity: 1;
      transform: scale(1);
    }
    .score-label {
      font-size: 0.7em;
      margin-right: 0.5em;
      font-family: inherit;
    }
    .score-value {
      font-size: 1.3em;
      font-family: inherit;
    }
    /* Responsive */
    @media (max-width: 900px) {
      .dashboard { flex-direction: column; align-items: center; }
      .score-badge { position: static; margin: 1.5em auto; }
    }
  </style>
</head>
<body>
  <h1 id="header">Touch Me <span class="tease">üòè‚ú®</span></h1>
  <img id="mainImage" src="bg.jpeg" alt="Background Image">

  <div id="scoreBadge" class="score-badge"></div>
  <div id="dashboard" class="dashboard"></div>

  <script>
    // File list
    const files = [
      "darkmode.json",
      "streaks1.json",
      "streaks2.json",
      "streaks3.json"
    ];
    // Ìï≠Î™© ÏàúÏÑú Î∞è Ï†ïÎ≥¥
    const config = {
      darkmode: [
        { key: "pad", label: "Pad" },
        { key: "phone", label: "Phone" }
      ],
      streaks1: [
        { key: "QT", label: "QT", type: "bool" },
        { key: "coding", label: "Coding", type: "bool" },
        { key: "kegel", label: "Kegel", type: "progress", max: 3 },
        { key: "anki", label: "Anki", type: "bool" }
      ],
      streaks2: [
        { key: "morning", label: "Morning Exercise", type: "bool" },
        { key: "jump", label: "Jump Rope", type: "bool" },
        { key: "logseq", label: "logseq", type: "bool" },
        { key: "aTracker", label: "aTracker", type: "bool" }
      ],
      streaks3: [
        { key: "reading", label: "Reading", type: "bool" },
        { key: "instrument", label: "Instrument", type: "progress", max: 2 },
        { key: "study", label: "Study", type: "progress", max: 5 }
      ]
    };

    // ÌååÏùºÎ≥Ñ Î∏îÎ°ù Ï†úÎ™©
    const blockTitles = {
      darkmode: "Dark Mode",
      streaks1: "Streaks 1",
      streaks2: "Streaks 2",
      streaks3: "Streaks 3"
    };

    // ÌååÏùºÎ™ÖÍ≥º config Îß§Ïπ≠
    function getConfigName(filename) {
      if (filename.startsWith("darkmode")) return "darkmode";
      if (filename.startsWith("streaks1")) return "streaks1";
      if (filename.startsWith("streaks2")) return "streaks2";
      if (filename.startsWith("streaks3")) return "streaks3";
      return "";
    }

    const header = document.getElementById("header");
    const image = document.getElementById("mainImage");
    const dashboard = document.getElementById("dashboard");
    const scoreBadge = document.getElementById("scoreBadge");

    // Ïù¥Î™®Ìã∞ÏΩò Ìö®Í≥º
    let tease = document.querySelector('.tease');
    if (tease) {
      tease.addEventListener('mouseover', () => { tease.textContent = "üòâüíñ"; });
      tease.addEventListener('mouseout', () => { tease.textContent = "üòè‚ú®"; });
    }

    image.addEventListener("click", async () => {
      image.style.opacity = 0;
      header.textContent = "My Streaks Data List";
      setTimeout(() => {
        image.remove();
        dashboard.classList.add("visible");
        scoreBadge.classList.add("visible");
      }, 1000);

      let allData = {};

      // ÌååÏùº Î∂àÎü¨Ïò§Í∏∞
      for (const filename of files) {
        try {
          const res = await fetch(filename);
          const json = await res.json();
          allData[getConfigName(filename)] = json;
        } catch (e) {
          allData[getConfigName(filename)] = null;
        }
      }

      // 7ÏùºÏ†êÏàò(7-day score)Îäî streaks3Ïóê ÏûàÎã§Í≥† Í∞ÄÏ†ï
      let score = allData.streaks3 && typeof allData.streaks3['7ÏùºÏ†êÏàò'] !== "undefined"
        ? allData.streaks3['7ÏùºÏ†êÏàò']
        : null;
      let scoreContent = "";
      if (score !== null && !isNaN(score)) {
        scoreContent = `<span class="score-label">7-Day Score</span><span class="score-value">${score} / 100</span>`;
      } else {
        scoreContent = `<span class="score-label">7-Day Score</span><span class="score-value">?</span>`;
      }
      scoreBadge.innerHTML = scoreContent;

      // Î∏îÎ°ù ÏÉùÏÑ±
      for (const [confKey, items] of Object.entries(config)) {
        const block = document.createElement('div');
        block.className = "block";
        const title = document.createElement('div');
        title.className = "block-title";
        title.textContent = blockTitles[confKey] || confKey;
        block.appendChild(title);

        const data = allData[confKey] || {};

        for (const item of items) {
          const row = document.createElement('div');
          row.className = "item-row";
          const label = document.createElement('span');
          label.className = "item-label";
          label.textContent = item.label;
          row.appendChild(label);

          // ÏÉÅÌÉú ÌëúÏãú
          if (confKey === "darkmode") {
            // Îã§ÌÅ¨/ÎùºÏù¥Ìä∏ Î™®Îìú Ïù¥Î™®Ìã∞ÏΩò
            let val = data[item.key];
            let icon;
            if (val === "dark" || val === true || val === 1) {
              icon = `<span class="status" title="Dark Mode">üåô</span>`;
            } else if (val === "light" || val === false || val === 0) {
              icon = `<span class="status" title="Light Mode">‚òÄÔ∏è</span>`;
            } else {
              icon = `<span class="status notdone">?</span>`;
            }
            row.innerHTML += icon;
          } else if (item.type === "bool") {
            let val = data[item.key];
            let icon = (val === true || val === "true" || val === 1) ?
              `<span class="status done">‚úîÔ∏è</span>` :
              `<span class="status notdone">‚úñÔ∏è</span>`;
            row.innerHTML += icon;
          } else if (item.type === "progress") {
            let val = parseInt(data[item.key] || 0, 10);
            let max = item.max;
            val = Math.max(0, Math.min(val, max));
            let percent = (val / max) * 100;
            row.innerHTML += `
              <span class="progress-bar" title="${val} / ${max}">
                <span class="progress-fill" style="width:${percent}%;"></span>
              </span>
            `;
          }
          block.appendChild(row);
        }
        dashboard.appendChild(block);
      }
    });

    // Footnote (for developer)
    // - Dark/Light mode is shown as moon/sun emoji.
    // - Progress types use a progress bar.
    // - 7-day score displays properly, never just '?' if value exists.
    // - All keys are left-aligned in each block.
  </script>
</body>
</html>
